<?php
// Include the database connection
include('db.php');

// Start the session to use cart functionality
session_start();

// Initialize cart if not exists
if (!isset($_SESSION['cart'])) {
    $_SESSION['cart'] = [];
}

// Check if the user is logged in
$isLoggedIn = isset($_SESSION['user_id']); // Check if 'user_id' session variable exists

// Include the authentication handler
include('auth.php');

// Check if the user is logged in via cookie
$user_data = checkAuth();

// Calculate cart count from session
$cartCount = count($_SESSION['cart']);

// Handle search functionality
$searchQuery = isset($_GET['search']) ? trim($_GET['search']) : '';
$sectionFilter = isset($_GET['section']) ? $_GET['section'] : null;
$brandFilter = isset($_GET['brand']) ? $_GET['brand'] : null;
$searchResults = false;

if (!empty($searchQuery)) {
    $searchSql = "SELECT * FROM products WHERE name LIKE '%" . $connection->real_escape_string($searchQuery) . "%' ORDER BY id DESC";
    $result = $connection->query($searchSql);
    $searchResults = true;
} elseif ($sectionFilter) {
    switch($sectionFilter) {
        case 'featured':
            $searchSql = "SELECT p.* FROM products p INNER JOIN featured_products fp ON p.id = fp.product_id ORDER BY p.id DESC";
            break;
        case 'new':
            $searchSql = "SELECT * FROM products ORDER BY id DESC";
            break;
        case 'recommended':
            $searchSql = "SELECT * FROM products ORDER BY RAND()";
            break;
        default:
            $searchSql = "SELECT * FROM products ORDER BY RAND()";
    }
    $result = $connection->query($searchSql);
    $searchResults = true;
} elseif ($brandFilter) {
    $brandSql = "SELECT * FROM products WHERE category = '" . $connection->real_escape_string($brandFilter) . "' ORDER BY id DESC";
    $result = $connection->query($brandSql);
    $searchResults = true;
} else {
    // Query to fetch all products from the database in random order
    $sql = "SELECT * FROM products ORDER BY RAND()";
    $result = $connection->query($sql);
}

// Fetch limited products for sections
$featuredSql = "SELECT p.id, p.name, p.price_ksh, p.image FROM products p 
                INNER JOIN featured_products fp ON p.id = fp.product_id
                ORDER BY p.id DESC LIMIT 10";
$featuredResult = $connection->query($featuredSql);

$newProductsSql = "SELECT * FROM products ORDER BY id DESC LIMIT 12";
$newProductsResult = $connection->query($newProductsSql);

$recommendedSql = "SELECT * FROM products ORDER BY RAND() LIMIT 84";
$recommendedResult = $connection->query($recommendedSql);

// Handle adding to cart
if (isset($_POST['add_to_cart'])) {
    $product_id = $_POST['product_id'];
    $product_name = $_POST['product_name'];
    $price = $_POST['price'];
    $image = $_POST['image'];
    $size = isset($_POST['size']) ? $_POST['size'] : '';
    $color = isset($_POST['color']) ? $_POST['color'] : '';
    
    // Check if product already exists in cart
    $found = false;
    foreach ($_SESSION['cart'] as &$item) {
        if ($item['id'] == $product_id && $item['size'] == $size && $item['color'] == $color) {
            $item['quantity'] += 1;
            $found = true;
            break;
        }
    }
    
    if (!$found) {
        $_SESSION['cart'][] = [
            'id' => $product_id,
            'name' => $product_name,
            'price' => $price,
            'image' => $image,
            'size' => $size,
            'color' => $color,
            'quantity' => 1
        ];
    }
    
    // Update cart count
    $cartCount = count($_SESSION['cart']);
    
    // Set notification message
    $_SESSION['notification'] = [
        'message' => "$product_name has been added to your cart!",
        'product_name' => $product_name,
        'product_image' => $image
    ];
    
    // Redirect to prevent form resubmission
    header("Location: ".$_SERVER['PHP_SELF']);
    exit();
}

// Display notification if exists
$notification = '';
if (isset($_SESSION['notification'])) {
    $notif = $_SESSION['notification'];
    $notification = <<<HTML
    <div class="notification">
        <div class="notification-content">
            <img src="uploads/{$notif['product_image']}" alt="{$notif['product_name']}">
            <span>{$notif['message']}</span>
        </div>
        <button class="close-notification">&times;</button>
    </div>
HTML;
    unset($_SESSION['notification']);
}

// Function to get random ad banners
function getRandomAd() {
    // Directory containing ads
    $adDirectory = 'assets/ads/';
    $adFiles = glob($adDirectory . '*.{jpg,jpeg,png,gif,webp,mp4,webm}', GLOB_BRACE);

    // Check if there are any ad files
    if (empty($adFiles)) {
        return ''; // No ads to display
    }

    // Select a random ad
    $randomAd = $adFiles[array_rand($adFiles)];
    $fileExtension = strtolower(pathinfo($randomAd, PATHINFO_EXTENSION));

    // Display ad based on type
    if (in_array($fileExtension, ['jpg', 'jpeg', 'png', 'gif', 'webp'])) {
        // Display image ad
        return '<div class="ad-banner">
                    <img src="' . $randomAd . '" alt="Ad Banner" style="width:100%; max-height:300px; object-fit:cover;">
                </div>';
    } elseif (in_array($fileExtension, ['mp4', 'webm'])) {
        // Display video ad
        return '<div class="ad-banner">
                    <video autoplay muted loop style="width:100%; max-height:300px; object-fit:cover;">
                        <source src="' . $randomAd . '" type="video/' . $fileExtension . '">
                        Your browser does not support the video tag.
                    </video>
                </div>';
    }

    return '';
}
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Shop the latest collection of quality sneakers for men and women at BrandX. Affordable prices, stylish designs, and fast delivery across Kenya.">
    <meta name="keywords" content="sneakers, sneaker shop Kenya, buy sneakers online, men's sneakers, women's sneakers, BrandX shoes, Nike sneakers Kenya, Adidas Kenya, Air Jordan Kenya, sneaker store Nairobi, best sneaker deals, sports shoes Kenya, casual shoes Nairobi, trendy sneakers 2025, affordable sneakers Kenya, original sneakers online, BrandX Kenya">
    <meta name="author" content="BrandX Kenya">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="BrandX - Quality Sneakers in Kenya">
    <meta property="og:description" content="Discover top sneaker brands like Nike, Adidas, and more. Shop affordable, stylish sneakers online at BrandX.">
    <meta property="og:image" content="https://brandx.co.ke/images/banner.jpg">
    <meta property="og:url" content="https://brandx.co.ke/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BrandX - Stylish & Affordable Sneakers">
    <meta name="twitter:description" content="Top sneaker store in Kenya. Find trendy sneakers for men & women at BrandX.">
    <meta name="twitter:image" content="https://brandx.co.ke/images/banner.jpg">
    <meta name="twitter:site" content="@BrandXKenya">
    <link rel="canonical" href="https://brandx.co.ke/">
    <title>BrandX - Quality Sneakers for Men & Women | Best Prices in Kenya</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
    :root {
      --primary: white;
      --primary-light: #15253f;
      --secondary: #3a7bd5;
      --accent: #00d2ff;
      --text: #f5f5f5;
      --text-secondary: #cccccc;
      --footer-dark: #080f1a;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--primary);
      color: black;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      padding-top: 80px; /* To account for fixed header */
    }

    header {
      background-color: var(--primary-light);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }

    .logo {
      font-size: 1.8rem;
      font-weight: bold;
      color: var(--accent);
      text-decoration: none;
      position: relative;
    }

    .glowing-logo {
      text-shadow: 0 0 10px rgba(0, 210, 255, 0.7), 
                   0 0 20px rgba(0, 210, 255, 0.5),
                   0 0 30px rgba(0, 210, 255, 0.3);
      animation: glow-pulse 2s infinite alternate;
    }

    @keyframes glow-pulse {
      from {
        text-shadow: 0 0 10px rgba(0, 210, 255, 0.7), 
                     0 0 20px rgba(0, 210, 255, 0.5),
                     0 0 30px rgba(0, 210, 255, 0.3);
      }
      to {
        text-shadow: 0 0 15px rgba(0, 210, 255, 0.8), 
                     0 0 25px rgba(0, 210, 255, 0.6),
                     0 0 35px rgba(0, 210, 255, 0.4);
      }
    }

    .hamburger {
      display: none;
      background: none;
      border: none;
      color: var(--accent);
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 1001;
    }

    nav {
      display: flex;
      gap: 2rem;
    }

    nav a {
      color: var(--text-secondary);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    nav a:hover {
      color: var(--accent);
    }

    .mobile-nav {
      display: none;
      flex-direction: column;
      background-color: var(--primary-light);
      position: fixed;
      top: 80px;
      left: 0;
      right: 0;
      z-index: 999;
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
      padding: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }

    .mobile-nav.active {
      display: flex;
      max-height: 500px;
      padding: 1rem 0;
    }

    .mobile-nav a {
      padding: 0.8rem 2rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      color: var(--text-secondary);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .mobile-nav a:hover {
      color: var(--accent);
      background-color: rgba(0,0,0,0.1);
    }

    .swiper {
      width: 100%;
      height: 400px;
      margin: 2rem 0;
    }

    .swiper-slide {
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }

    .swiper-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .slide-content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(10, 18, 32, 0.9), transparent);
      padding: 2rem;
      color: white;
    }

    .slide-content h2 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .slide-content p {
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    .slide-button {
      background-color: var(--accent);
      color: var(--primary);
      border: none;
      padding: 0.7rem 1.5rem;
      border-radius: 5px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .slide-button:hover {
      background-color: white;
      transform: translateY(-2px);
    }

    .section-title {
      font-size: 1.5rem;
      margin: 2rem 0 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--accent);
      display: inline-block;
    }

    .section-title i {
      margin-right: 0.8rem;
      color: var(--accent);
    }

    main {
      flex: 1;
      padding: 2rem;
      max-width: 1600px;
      margin: 0 auto;
      width: 100%;
    }

    .products-container {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 1.5rem;
      margin-bottom: 3rem;
    }

    @media (max-width: 1200px) {
      .products-container {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    @media (max-width: 900px) {
      .products-container {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 600px) {
      .products-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .product-card {
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 5px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
      position: relative;
    }

    .product-card:hover {
      transform: translateY(-5px);
    }

    .product-image {
      position: relative;
    }

    .product-image img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .discount-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: orange;
      color: black;
      font-size: 0.8rem;
      padding: 0.3rem 0.6rem;
      border-radius: 4px;
      font-weight: 600;
      z-index: 2;
    }

    .product-details {
      padding: 1rem;
      position: relative;
    }

    .product-title {
      font-size: 1rem;
      margin-bottom: 0.5rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .product-rating {
      color: orange;
      margin-bottom: 0.5rem;
      font-size: 0.8rem;
    }

    .price-container {
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
    }

    .original-price {
      text-decoration: line-through;
      color: var(--text-secondary);
      font-size: 0.8rem;
      margin-right: 0.5rem;
    }

    .current-price {
      color: var(--accent);
      font-weight: bold;
      font-size: 1rem;
    }

    .cart-icon {
      position: absolute;
      bottom: 1rem;
      right: 1rem;
      background-color: rgba(0, 210, 255, 0.1);
      color: var(--accent);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
      border: 1px solid var(--accent);
    }

    .cart-icon:hover {
      background-color: var(--accent);
      color: var(--primary);
      transform: scale(1.1);
    }
/* Main container adjustments */
main {
  padding: 1rem 0.5rem; /* Reduced from 2rem */
}

/* Further reduced screen margin on mobile */
@media (max-width: 600px) {
  main {
    padding: 1rem 0.25rem;
  }
}

/* Product grid with tighter spacing */
.products-container {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 0.5rem;
  margin: 0 0.25rem 1rem; /* top | horizontal | bottom */
}

/* Responsive adjustments */
@media (max-width: 1200px) {
  .products-container {
    grid-template-columns: repeat(4, 1fr);
    margin: 0 0.25rem 1rem;
  }
}

@media (max-width: 900px) {
  .products-container {
    grid-template-columns: repeat(3, 1fr);
    margin: 0 0.25rem 1rem;
  }
}

@media (max-width: 600px) {
  .products-container {
    grid-template-columns: repeat(2, 1fr);
    margin: 0 0.1rem 0.75rem; /* Even tighter on mobile */
  }
}
    footer {
      background-color: var(--footer-dark);
      color: var(--text-secondary);
      padding: 3rem 2rem;
      text-align: left;
      margin-top: auto;
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .footer-section {
      margin-bottom: 1.5rem;
    }

    .footer-section h3 {
      color: var(--accent);
      margin-bottom: 1.5rem;
      font-size: 1.2rem;
    }

    .footer-section p, .footer-section a {
      color: var(--text-secondary);
      margin-bottom: 1rem;
      display: block;
      text-decoration: none;
      line-height: 1.6;
    }

    .footer-section a:hover {
      color: var(--accent);
    }

    .copyright {
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .hamburger {
        display: block;
      }

      nav {
        display: none;
      }

      body {
        padding-top: 70px;
      }

      header {
        padding: 1rem;
      }

      .swiper {
        height: 300px;
      }
    }
      /* New sections styling */
  .section-title {
    font-size: 1.5rem;
    margin: 1.5rem 0 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--accent);
    display: flex;
    align-items: center;
  }

  .section-title i {
    margin-right: 0.8rem;
    color: var(--accent);
  }

  /* Special Hot Deals styling */
  .hot-deals .product-card {
    border: 2px solid #ff4757;
    position: relative;
  }

  .hot-deals .hot-tag {
    position: absolute;
    top: 10px;
    right: 10px;
    background-color: #ff4757;
    color: white;
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
    font-weight: bold;
    font-size: 0.8rem;
  }

  /* Scrollable brand/category columns */
  .scroll-column {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-height: 400px;
    overflow-y: auto;
    padding-right: 0.5rem;
  }

  .brands-container {
    display: flex;
    overflow-x: auto;
    gap: 0.8rem;
    padding: 1rem 0.5rem;
    scrollbar-width: thin;
  }
  
  .brand-card {
    flex: 0 0 auto;
    width: 90px; /* Reduced size */
    height: 90px;
    background-color: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1); /* Added border */
    border-radius: 10px;
    padding: 0.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }
  
  .brand-card:hover {
    border-color: var(--accent);
    transform: translateY(-3px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }
  
  .brand-logo {
    width: 40px; /* Smaller logo */
    height: 40px;
    object-fit: contain;
    margin-bottom: 0.3rem;
    background-color: white;
    padding: 0.2rem;
    border-radius: 5px;
  }
  
  .brand-name {
    text-align: center;
    font-size: 0.7rem; /* Smaller text */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 100%;
  }

  .columns-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 3rem;
  }

  /* Custom scrollbar */
  .scroll-column::-webkit-scrollbar {
    width: 6px;
  }

  .scroll-column::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .scroll-column::-webkit-scrollbar-thumb {
    background: var(--accent);
    border-radius: 3px;
  }

  /* Notification styling */
  .notification {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background-color: white;
    color: black;
    padding: 15px 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    display: flex;
    align-items: center;
    justify-content: space-between;
    z-index: 1000;
    transform: translateY(100px);
    opacity: 0;
    animation: slideIn 0.5s forwards, fadeOut 0.5s forwards 3s;
    max-width: 350px;
    border-left: 4px solid var(--accent);
  }

  .notification-content {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .notification img {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 4px;
  }

  .close-notification {
    background: none;
    border: none;
    color: #999;
    font-size: 20px;
    cursor: pointer;
    margin-left: 15px;
  }

  .close-notification:hover {
    color: #666;
  }

  @keyframes slideIn {
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes fadeOut {
    to {
      opacity: 0;
      transform: translateY(20px);
    }
  }

  /* Search bar styling */
  .search-container {
    position: relative;
    width: 100%;
    max-width: 600px;
    margin: 0 auto;
  }

  .search-bar {
    width: 100%;
    padding: 12px 20px;
    padding-right: 50px;
    border: 2px solid #ddd;
    border-radius: 30px;
    font-size: 16px;
    outline: none;
    transition: all 0.3s;
  }

  .search-bar:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(0, 210, 255, 0.2);
  }

  .search-button {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: var(--accent);
    font-size: 18px;
    cursor: pointer;
  }

  /* Cart count styling */
  .cart-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background-color: var(--accent);
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
  }

  /* Mobile menu toggle */
  .ham-menu {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    width: 24px;
    height: 18px;
    cursor: pointer;
  }

  .ham-menu span {
    display: block;
    width: 100%;
    height: 2px;
    background-color: var(--accent);
    transition: all 0.3s;
  }

  .ham-menu.active span:nth-child(1) {
    transform: translateY(8px) rotate(45deg);
  }

  .ham-menu.active span:nth-child(2) {
    opacity: 0;
  }

  .ham-menu.active span:nth-child(3) {
    transform: translateY(-8px) rotate(-45deg);
  }

  /* Off-screen menu */
  .off-screen-menu {
    position: fixed;
    top: 0;
    left: -100%;
    width: 300px;
    max-width: 90%;
    height: 100vh;
    background-color: white;
    box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    z-index: 1000;
    transition: left 0.3s;
    padding: 20px;
    overflow-y: auto;
  }

  .off-screen-menu.active {
    left: 0;
  }

  .off-screen-menu ul {
    list-style: none;
    margin-top: 50px;
  }

  .off-screen-menu li {
    margin-bottom: 15px;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
  }

  .off-screen-menu a {
    display: block;
    padding: 8px 0;
    color: #333;
    font-weight: 500;
    transition: color 0.3s;
  }

  .off-screen-menu a:hover {
    color: var(--accent);
  }

  .menu-close {
    position: absolute;
    right: 20px;
    top: 20px;
    font-size: 24px;
    color: #666;
    cursor: pointer;
  }

  .navlogo {
    padding: 10px 0;
    border-bottom: 1px solid #eee;
    margin-bottom: 20px;
  }

  .navlogo img {
    height: 30px;
  }

  /* Slider styles */
  .slider-container {
    position: relative;
    width: 95%;
    margin: 20px auto;
    height: 200px;
    overflow: hidden;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }

  .slider {
    display: flex;
    transition: transform 0.5s ease;
    height: 100%;
  }

  .slide {
    min-width: 100%;
    position: relative;
  }

  .slide img, .slide video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .slibuttonv {
    position: absolute;
    top: 50%;
    width: 100%;
    display: flex;
    justify-content: space-between;
    transform: translateY(-50%);
    padding: 0 20px;
  }

  .slibuttonv button {
    background: rgba(0,0,0,0.5);
    color: white;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s;
  }

  .slibuttonv button:hover {
    background: rgba(0,0,0,0.7);
  }

  /* Section banner */
  .section-banner-container {
    width: 95%;
    margin: 20px auto;
  }

  .section-banner {
    position: relative;
    width: 100%;
    height: 150px;
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    background-size: cover;
    background-position: center;
    transition: transform 0.3s;
  }

  .section-banner:hover {
    transform: translateY(-3px);
  }

  .banner-content {
    position: absolute;
    bottom: 0;
    left: 0;
    padding: 20px;
    color: white;
    width: 100%;
    background: linear-gradient(transparent, rgba(0,0,0,0.7));
  }

  .banner-content h3 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
  }

  .banner-content p {
    margin: 5px 0 0;
    font-size: 0.9rem;
    opacity: 0.9;
  }

  /* No results styling */
  .no-results {
    text-align: center;
    padding: 50px 20px;
    color: #666;
  }

  .no-results i {
    font-size: 40px;
    margin-bottom: 15px;
    color: #ddd;
  }

  .no-results h3 {
    margin-bottom: 10px;
    color: #333;
  }

  .no-results p {
    margin-bottom: 20px;
  }

  .btn {
    display: inline-block;
    padding: 10px 20px;
    background-color: var(--accent);
    color: white;
    border-radius: 5px;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s;
  }

  .btn:hover {
    background-color: #00b8e6;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
</style>
</head>
<body>
    <?php echo $notification; ?>
    
    <header>
        <div class="ham-menu" onclick="toggleMenu()">
            <span></span><span></span><span></span>
        </div>
        
        <div class="logo">
            <a href="home.php" class="glowing-logo">
                <img src="uploads/brandxlogo.png" alt="BrandX Logo" style="height: 40px;">
            </a>
        </div>
        
        <div class="nav-container">
            <div class="cart-icon">
                <a href="cart.php">
                    <i class="fas fa-shopping-cart"></i>
                    <?php if ($cartCount > 0): ?>
                        <span class="cart-count"><?php echo $cartCount; ?></span>
                    <?php endif; ?>
                </a>
            </div>
        </div>
    </header>
    
    <div class="search-container" style="padding: 10px 20px; background-color: var(--primary-light);">
        <form action="home.php" method="get">
            <input type="text" name="search" class="search-bar" placeholder="Search for products..." value="<?php echo htmlspecialchars($searchQuery); ?>">
            <button type="submit" class="search-button"><i class="fas fa-search"></i></button>
        </form>
    </div>
    
    <div class="off-screen-menu" id="menu">
        <div class="menu-close" onclick="toggleMenu()">
            <i class="fas fa-times"></i>
        </div>
        <div class="navlogo">
            <a href="home.php">
                <img src="uploads/brandxlogo.png" alt="BrandX Logo">
            </a>
        </div>
        
        <ul>
            <li><a href="home.php"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="cart.php"><i class="fas fa-shopping-cart"></i> Cart</a></li>
            <li><a href="orders.php"><i class="fas fa-box"></i> My Orders</a></li>
            <li><a href="about_us.php"><i class="fas fa-info-circle"></i> About us</a></li>
            <li><a href="services.php"><i class="fas fa-concierge-bell"></i> Services</a></li>
            
            <?php if ($isLoggedIn): ?>
                <li><a href="logout.php" style="color: var(--accent);"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            <?php else: ?>
                <li><a href="login.php" style="color: #4ea8de;"><i class="fas fa-sign-in-alt"></i> Login</a></li>
            <?php endif; ?>
            
            <li><a href="admin_dashboard.php" style="color: skyblue;"><i class="fas fa-user-shield"></i> Admin</a></li>
        </ul>
    </div>
    
    <main>
        <?php if ($searchResults || $sectionFilter || $brandFilter): ?>
            <!-- Filtered Products View -->
            <?php if ($brandFilter): ?>
                <div class="search-results-header">
                    <h2>Products from <?php echo htmlspecialchars(ucfirst($brandFilter)); ?></h2>
                </div>
                <div class="section-banner-container">
                    <div class="section-banner" style="background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('uploads/brands.jpeg')">
                        <div class="banner-content">
                            <h3>Premium Brands</h3>
                            <p>Shop by your favorite labels →</p>
                        </div>
                    </div>
                </div>
            <?php elseif ($sectionFilter): ?>
                <div class="search-results-header">
                    <h2><?php echo htmlspecialchars(ucfirst($sectionFilter)); ?> Products</h2>
                </div>
                <?php 
                $banners = [
                    'featured' => [
                        'image' => 'uploads/best1.jpeg',
                        'title' => 'Premium Selection',
                        'text' => 'Discover our featured collection →'
                    ],
                    'new' => [
                        'image' => 'uploads/best.png',
                        'title' => 'Just Dropped',
                        'text' => 'Explore the latest arrivals →'
                    ],
                    'recommended' => [
                        'image' => 'uploads/recommended.jpeg',
                        'title' => 'Personal Picks',
                        'text' => 'Selected just for you →'
                    ]
                ];
                
                if (isset($banners[$sectionFilter])): ?>
                <div class="section-banner-container">
                    <div class="section-banner" style="background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('<?php echo htmlspecialchars($banners[$sectionFilter]['image']); ?>')">
                        <div class="banner-content">
                            <h3><?php echo htmlspecialchars($banners[$sectionFilter]['title']); ?></h3>
                            <p><?php echo htmlspecialchars($banners[$sectionFilter]['text']); ?></p>
                        </div>
                    </div>
                </div>
                <?php endif; ?>
            <?php else: ?>
                <div class="search-results-header">
                    <h2>Search Results for "<?php echo htmlspecialchars($searchQuery); ?>"</h2>
                </div>
            <?php endif; ?>
            
            <?php if ($result && $result->num_rows > 0): ?>
                <div class="products-container">
                    <?php while ($row = $result->fetch_assoc()): ?>
                        <div class="product-card">
                            <a href="product.php?id=<?php echo htmlspecialchars($row['id']); ?>">
                                <div class="product-image">
                                    <img src="uploads/<?php echo htmlspecialchars($row['image']); ?>" alt="<?php echo htmlspecialchars($row['name']); ?>" loading="lazy">
                                </div>
                                <div class="product-details">
                                    <h3 class="product-title"><?php echo htmlspecialchars($row['name']); ?></h3>
                                    <?php if ($row['rating']): ?>
                                        <div class="product-rating">
                                            <?php 
                                            $fullStars = floor($row['rating']);
                                            $halfStar = ($row['rating'] - $fullStars) >= 0.5;
                                            
                                            for ($i = 0; $i < 5; $i++) {
                                                if ($i < $fullStars) {
                                                    echo '<i class="fas fa-star"></i>';
                                                } elseif ($i == $fullStars && $halfStar) {
                                                    echo '<i class="fas fa-star-half-alt"></i>';
                                                } else {
                                                    echo '<i class="far fa-star"></i>';
                                                }
                                            }
                                            ?>
                                        </div>
                                    <?php endif; ?>
                                    <div class="price-container">
                                        <span class="current-price">Ksh <?php echo number_format($row['price_ksh'], 2); ?></span>
                                    </div>
                                </div>
                            </a>
                            <form method="post" class="cart-icon" onclick="this.submit()">
                                <input type="hidden" name="add_to_cart" value="1">
                                <input type="hidden" name="product_id" value="<?php echo $row['id']; ?>">
                                <input type="hidden" name="product_name" value="<?php echo htmlspecialchars($row['name']); ?>">
                                <input type="hidden" name="price" value="<?php echo $row['price_ksh']; ?>">
                                <input type="hidden" name="image" value="<?php echo htmlspecialchars($row['image']); ?>">
                                <i class="fas fa-cart-plus"></i>
                            </form>
                        </div>
                    <?php endwhile; ?>
                </div>
            <?php else: ?>
                <div class="no-results">
                    <i class="fas fa-search"></i>
                    <h3>No products found</h3>
                    <p>We couldn't find any products matching your search</p>
                    <a href="home.php" class="btn">Continue Shopping</a>
                </div>
            <?php endif; ?>
        <?php else: ?>
            <!-- Main Content (Default View) -->
            <div id="mainContent">
                <!-- Fixed Slider Section -->
                <div class="slider-container">
                    <div class="slider">
                        <?php
                        $adsDirectory = 'ads/';
                        $defaultBanner = 'uploads/default-banner.jpg';
                        
                        // Check if directory exists
                        if (is_dir($adsDirectory)) {
                            $ads = array_diff(scandir($adsDirectory), ['.', '..']);
                            
                            if (count($ads) > 0) {
                                foreach ($ads as $ad) {
                                    $filePath = $adsDirectory . $ad;
                                    $fileExt = strtolower(pathinfo($filePath, PATHINFO_EXTENSION));
                                    
                                    if (in_array($fileExt, ['jpg', 'jpeg', 'png', 'gif', 'webp'])) {
                                        echo "<div class='slide'><img src='$filePath' alt='Ad Banner' loading='lazy'></div>";
                                    } 
                                    elseif (in_array($fileExt, ['mp4', 'webm', 'ogg'])) {
                                        echo "<div class='slide'>
                                                <video autoplay muted loop playsinline>
                                                    <source src='$filePath' type='video/$fileExt'>
                                                </video>
                                              </div>";
                                    }
                                }
                            } else {
                                // Fallback if no ads found
                                echo "<div class='slide'><img src='$defaultBanner' alt='Default Banner'></div>";
                            }
                        } else {
                            // Fallback if ads directory doesn't exist
                            echo "<div class='slide'><img src='$defaultBanner' alt='Default Banner'></div>";
                            echo "<div class='slide'><img src='uploads/banner2.jpg' alt='Fallback Banner'></div>";
                        }
                        ?>
                    </div>
                    <div class="slibuttonv">
                        <button class="prev"><i class="fas fa-chevron-left"></i></button>
                        <button class="next"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>

                <!-- Featured Products Section -->
                <h2 class="section-title">
                    <i class="fas fa-star"></i> BEST FROM BRANDX
                </h2>
                <div class="section-banner-container">
                    <div class="section-banner" onclick="filterBySection('featured')" style="background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('uploads/best1.jpeg')">
                        <div class="banner-content">
                            <h3>Premium Selection</h3>
                            <p>Discover our featured collection →</p>
                        </div>
                    </div>
                </div>
                <div class="products-container">
                    <?php if ($featuredResult && $featuredResult->num_rows > 0): ?>
                        <?php while ($featuredProduct = $featuredResult->fetch_assoc()): ?>
                            <div class="product-card">
                                <a href="product.php?id=<?php echo htmlspecialchars($featuredProduct['id']); ?>">
                                    <div class="product-image">
                                        <img src="uploads/<?php echo htmlspecialchars($featuredProduct['image']); ?>" alt="<?php echo htmlspecialchars($featuredProduct['name']); ?>" loading="lazy">
                                    </div>
                                    <div class="product-details">
                                        <h3 class="product-title"><?php echo htmlspecialchars($featuredProduct['name']); ?></h3>
                                        <div class="price-container">
                                            <span class="current-price">Ksh <?php echo number_format($featuredProduct['price_ksh'], 2); ?></span>
                                        </div>
                                    </div>
                                </a>
                                <form method="post" class="cart-icon" onclick="this.submit()">
                                    <input type="hidden" name="add_to_cart" value="1">
                                    <input type="hidden" name="product_id" value="<?php echo $featuredProduct['id']; ?>">
                                    <input type="hidden" name="product_name" value="<?php echo htmlspecialchars($featuredProduct['name']); ?>">
                                    <input type="hidden" name="price" value="<?php echo $featuredProduct['price_ksh']; ?>">
                                    <input type="hidden" name="image" value="<?php echo htmlspecialchars($featuredProduct['image']); ?>">
                                    <i class="fas fa-cart-plus"></i>
                                </form>
                            </div>
                        <?php endwhile; ?>
                    <?php else: ?>
                        <p class="no-products">No featured products available at the moment.</p>
                    <?php endif; ?>
                </div>

                <!-- New Arrivals Section -->
                <h2 class="section-title">
                    <i class="fas fa-fire"></i> NEW ARRIVALS
                </h2>
                <div class="section-banner-container">
                    <div class="section-banner" onclick="filterBySection('new')" style="background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('uploads/best.png')">
                        <div class="banner-content">
                            <h3>Just Dropped</h3>
                            <p>Explore the latest arrivals →</p>
                        </div>
                    </div>
                </div>
                <div class="products-container">
                    <?php if ($newProductsResult && $newProductsResult->num_rows > 0): ?>
                        <?php while ($newProduct = $newProductsResult->fetch_assoc()): ?>
                            <div class="product-card">
                                <a href="product.php?id=<?php echo htmlspecialchars($newProduct['id']); ?>">
                                    <div class="product-image">
                                        <img src="uploads/<?php echo htmlspecialchars($newProduct['image']); ?>" alt="<?php echo htmlspecialchars($newProduct['name']); ?>" loading="lazy">
                                    </div>
                                    <div class="product-details">
                                        <h3 class="product-title"><?php echo htmlspecialchars($newProduct['name']); ?></h3>
                                        <div class="price-container">
                                            <span class="current-price">Ksh <?php echo number_format($newProduct['price_ksh'], 2); ?></span>
                                        </div>
                                    </div>
                                </a>
                                <form method="post" class="cart-icon" onclick="this.submit()">
                                    <input type="hidden" name="add_to_cart" value="1">
                                    <input type="hidden" name="product_id" value="<?php echo $newProduct['id']; ?>">
                                    <input type="hidden" name="product_name" value="<?php echo htmlspecialchars($newProduct['name']); ?>">
                                    <input type="hidden" name="price" value="<?php echo $newProduct['price_ksh']; ?>">
                                    <input type="hidden" name="image" value="<?php echo htmlspecialchars($newProduct['image']); ?>">
                                    <i class="fas fa-cart-plus"></i>
                                </form>
                            </div>
                        <?php endwhile; ?>
                    <?php else: ?>
                        <p class="no-products">No newly added products found.</p>
                    <?php endif; ?>
                </div>

                <!-- Top Brands Section -->
                <h2 class="section-title">
                    <i class="fas fa-tags"></i> TOP BRANDS
                </h2>
                <div class="section-banner-container">
                    <div class="section-banner" onclick="showAllBrands()" style="background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('uploads/brands.jpeg')">
                        <div class="banner-content">
                            <h3>Premium Brands</h3>
                            <p>Shop by your favorite labels →</p>
                        </div>
                    </div>
                </div>
                <div class="brands-container">
                    <div class="brand-card" onclick="filterByBrand('nike')">
                        <img src="uploads/nike.png" alt="Nike" class="brand-logo">
                        <span class="brand-name">Nike</span>
                    </div>
                    <div class="brand-card" onclick="filterByBrand('adidas')">
                        <img src="uploads/adidas.png" alt="Adidas" class="brand-logo">
                        <span class="brand-name">Adidas</span>
                    </div>
                    <div class="brand-card" onclick="filterByBrand('jordan')">
                        <img src="uploads/jordan.png" alt="Jordan" class="brand-logo">
                        <span class="brand-name">Jordan</span>
                    </div>
                    <div class="brand-card" onclick="filterByBrand('puma')">
                        <img src="uploads/puma.png" alt="Puma" class="brand-logo">
                        <span class="brand-name">Puma</span>
                    </div>
                    <div class="brand-card" onclick="filterByBrand('newbalance')">
                        <img src="uploads/nb.png" alt="New Balance" class="brand-logo">
                        <span class="brand-name">New Balance</span>
                    </div>
                    <div class="brand-card" onclick="filterByBrand('vans')">
                        <img src="uploads/vans.png" alt="Vans" class="brand-logo">
                        <span class="brand-name">Vans</span>
                    </div>
                </div>

                <!-- Recommended Products Section -->
                <h2 class="section-title">
                    <i class="fas fa-thumbs-up"></i> RECOMMENDED FOR YOU
                </h2>
                <div class="section-banner-container">
                    <div class="section-banner" onclick="filterBySection('recommended')" style="background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('uploads/recommended.jpeg')">
                        <div class="banner-content">
                            <h3>Personal Picks</h3>
                            <p>Selected just for you →</p>
                        </div>
                    </div>
                </div>
                <div class="products-container">
                    <?php if ($recommendedResult && $recommendedResult->num_rows > 0): ?>
                        <?php while ($recommendedProduct = $recommendedResult->fetch_assoc()): ?>
                            <div class="product-card">
                                <a href="product.php?id=<?php echo htmlspecialchars($recommendedProduct['id']); ?>">
                                    <div class="product-image">
                                        <img src="uploads/<?php echo htmlspecialchars($recommendedProduct['image']); ?>" alt="<?php echo htmlspecialchars($recommendedProduct['name']); ?>" loading="lazy">
                                    </div>
                                    <div class="product-details">
                                        <h3 class="product-title"><?php echo htmlspecialchars($recommendedProduct['name']); ?></h3>
                                        <?php if ($recommendedProduct['rating']): ?>
                                            <div class="product-rating">
                                                <?php 
                                                $fullStars = floor($recommendedProduct['rating']);
                                                $halfStar = ($recommendedProduct['rating'] - $fullStars) >= 0.5;
                                                
                                                for ($i = 0; $i < 5; $i++) {
                                                    if ($i < $fullStars) {
                                                        echo '<i class="fas fa-star"></i>';
                                                    } elseif ($i == $fullStars && $halfStar) {
                                                        echo '<i class="fas fa-star-half-alt"></i>';
                                                    } else {
                                                        echo '<i class="far fa-star"></i>';
                                                    }
                                                }
                                                ?>
                                            </div>
                                        <?php endif; ?>
                                        <div class="price-container">
                                            <span class="current-price">Ksh <?php echo number_format($recommendedProduct['price_ksh'], 2); ?></span>
                                        </div>
                                    </div>
                                </a>
                                <form method="post" class="cart-icon" onclick="this.submit()">
                                    <input type="hidden" name="add_to_cart" value="1">
                                    <input type="hidden" name="product_id" value="<?php echo $recommendedProduct['id']; ?>">
                                    <input type="hidden" name="product_name" value="<?php echo htmlspecialchars($recommendedProduct['name']); ?>">
                                    <input type="hidden" name="price" value="<?php echo $recommendedProduct['price_ksh']; ?>">
                                    <input type="hidden" name="image" value="<?php echo htmlspecialchars($recommendedProduct['image']); ?>">
                                    <i class="fas fa-cart-plus"></i>
                                </form>
                            </div>
                        <?php endwhile; ?>
                    <?php else: ?>
                        <p class="no-products">No recommended products found.</p>
                    <?php endif; ?>
                </div>
            </div>
        <?php endif; ?>
    </main>
    
    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/6797e4d93a84273260757d95/1iiklbtg5';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>
    <!--End of Tawk.to Script-->
    
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About BrandX</h3>
                <p>Your premier destination for quality sneakers in Kenya. We offer the latest styles from top brands at affordable prices.</p>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <a href="home.php">Home</a>
                <a href="products.php">Products</a>
                <a href="about_us.php">About Us</a>
                <a href="contact.php">Contact</a>
            </div>
            
            <div class="footer-section">
                <h3>Customer Service</h3>
                <a href="faq.php">FAQs</a>
                <a href="shipping.php">Shipping Policy</a>
                <a href="returns.php">Returns & Refunds</a>
                <a href="privacy.php">Privacy Policy</a>
            </div>
            
            <div class="footer-section">
                <h3>Contact Us</h3>
                <p><i class="fas fa-phone-alt"></i> +254 773 184 426</p>
                <p><i class="fas fa-envelope"></i> info@brandx.co.ke</p>
                <div class="social-icons" style="margin-top: 10px;">
                    <a href="https://www.instagram.com/top_brand_x" target="_blank" style="margin-right: 10px;"><i class="fab fa-instagram"></i></a>
                    <a href="https://wa.me/254773184426" target="_blank" style="margin-right: 10px;"><i class="fab fa-whatsapp"></i></a>
                    <a href="https://facebook.com/brandxkenya" target="_blank"><i class="fab fa-facebook"></i></a>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            &copy; 2024-2025 BrandX Online Store | All Rights Reserved <br>
            Developed and maintained by <a href="https://wa.me/254773743248" target="_blank">Simon Ngugi</a>
        </div>
    </footer>
    
    <script>
    // Variables
    document.addEventListener("DOMContentLoaded", function() {
        const slides = document.querySelectorAll('.slide');
        const slider = document.querySelector('.slider');
        const totalSlides = slides.length;
        let currentIndex = 0;
        let slideInterval;
        let isAdPlaying = false;
        
        // Initialize slider
        function initSlider() {
            // Set initial transform
            slider.style.transform = `translateX(-${currentIndex * 100}%)`;
            
            // Set up event listeners for navigation buttons
            document.querySelector('.prev').addEventListener('click', () => {
                clearInterval(slideInterval);
                goToSlide(currentIndex - 1);
                slideInterval = setInterval(autoSlide, 6000);
            });
            
            document.querySelector('.next').addEventListener('click', () => {
                clearInterval(slideInterval);
                goToSlide(currentIndex + 1);
                slideInterval = setInterval(autoSlide, 6000);
            });
            
            // Start auto sliding
            slideInterval = setInterval(autoSlide, 6000);
        }
        
        function goToSlide(index) {
            // Adjusting for continuous looping
            if (index >= totalSlides) {
                currentIndex = 0;
            } else if (index < 0) {
                currentIndex = totalSlides - 1;
            } else {
                currentIndex = index;
            }
            
            // Slide to the new index
            slider.style.transform = `translateX(-${currentIndex * 100}%)`;
            
            // Check if it's an ad and handle it
            const currentSlide = slides[currentIndex];
            const video = currentSlide.querySelector('video');
            if (video) {
                isAdPlaying = true;
                video.play().catch(e => console.log("Autoplay prevented:", e));
                video.onended = function() {
                    isAdPlaying = false;
                    autoSlide();
                };
            } else {
                isAdPlaying = false;
            }
        }
        
        function autoSlide() {
            // If an ad is playing, don't auto slide
            if (!isAdPlaying) {
                goToSlide(currentIndex + 1);
            }
        }
        
        // Initialize the slider
        initSlider();
        
        // Close notification when clicked
        document.querySelector('.close-notification')?.addEventListener('click', function() {
            document.querySelector('.notification').style.display = 'none';
        });
    });
    
    function toggleMenu() {
        const menu = document.getElementById('menu');
        const hamMenu = document.querySelector('.ham-menu');
        menu.classList.toggle('active');
        hamMenu.classList.toggle('active');
        
        // Toggle body scroll when menu is open
        if (menu.classList.contains('active')) {
            document.body.style.overflow = 'hidden';
        } else {
            document.body.style.overflow = '';
        }
    }
    
    // Brand filtering functionality
    function filterByBrand(brand) {
        window.location.href = `home.php?brand=${brand}`;
    }
    
    // Section filtering functionality
    function filterBySection(section) {
        window.location.href = `home.php?section=${section}`;
    }
    
    // Show all brands view
    function showAllBrands() {
        document.getElementById('mainContent').style.display = 'none';
        document.getElementById('allBrandsView').classList.add('active');
    }
    
    // Hide all brands view
    function hideAllBrands() {
        document.getElementById('mainContent').style.display = 'block';
        document.getElementById('allBrandsView').classList.remove('active');
    }
    
    // Remove blue highlight on tap/click
    document.addEventListener('touchstart', function() {}, {passive: true});
    </script>
</body>
</html>

<?php
// Close the database connection
$connection->close();
?>